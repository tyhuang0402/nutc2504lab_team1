{
  "dashboard": {
    "id": null,
    "uid": "docai-multi-tenancy-gpu",
    "title": "DocAI Multi-Tenant GPU",
    "timezone": "browser",
    "schemaVersion": 37,
    "version": 1,
    "refresh": "10s",
    "templating": {
      "list": [
        {
          "name": "namespace",
          "label": "Namespace",
          "type": "query",
          "datasource": "",
          "query": "label_values(dcgm_gpu_utilization, namespace)",
          "includeAll": false,
          "multi": false,
          "refresh": 1
        }
      ]
    },
    "panels": [
      {
        "type": "timeseries",
        "title": "Per-tenant GPU Utilization (avg)",
        "gridPos": { "x": 0, "y": 0, "w": 24, "h": 9 },
        "datasource": "",
        "targets": [
          {
            "expr": "avg by (namespace) (dcgm_gpu_utilization)",
            "legendFormat": "{{namespace}}",
            "refId": "A"
          }
        ],
        "fieldConfig": {
          "defaults": {
            "unit": "percent"
          }
        }
      },
      {
        "type": "stat",
        "title": "Selected Namespace Current GPU Utilization",
        "gridPos": { "x": 0, "y": 9, "w": 12, "h": 5 },
        "datasource": "",
        "targets": [
          {
            "expr": "dcgm_gpu_utilization{namespace=\"$namespace\"}",
            "refId": "B"
          }
        ],
        "options": {
          "reduceOptions": { "values": false, "calcs": ["lastNotNull"], "fields": "" }
        },
        "fieldConfig": {
          "defaults": {
            "unit": "percent"
          }
        }
      },
      {
        "type": "gauge",
        "title": "Selected Namespace GPU Utilization (Gauge)",
        "gridPos": { "x": 12, "y": 9, "w": 12, "h": 5 },
        "datasource": "",
        "targets": [
          {
            "expr": "dcgm_gpu_utilization{namespace=\"$namespace\"}",
            "refId": "C"
          }
        ],
        "fieldConfig": {
          "defaults": {
            "unit": "percent"
          }
        }
      }
    ]
  },
  "overwrite": true
}
